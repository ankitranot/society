<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Finance Tools</title>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <style>
    :root {
      --primary: #0077cc;
      --primary-dark: #005fa3;
      --light: #fff;
      --bg: #f4f4f4;
      --text: #333;
    }
    body { font-family: Arial, sans-serif; margin: 0; background: var(--bg); color: var(--text); }
    header { background: var(--primary); padding: 12px; display: flex; flex-wrap: wrap; gap: 10px; justify-content: center; }
    header button { flex: 1 1 auto; max-width: 200px; padding: 12px; font-size: 15px; font-weight: bold; border: none; border-radius: 6px; background: var(--light); color: var(--primary); cursor: pointer; }
    header button:hover { background: #eee; }
    .tool { display: none; background: var(--light); padding: 20px; margin: 20px auto; max-width: 700px; border-radius: 8px; box-shadow: 0 2px 6px rgba(0,0,0,0.15); }
    h2 { text-align: center; font-size: 1.4rem; margin-top: 0; }
    label { display: block; margin-top: 12px; font-weight: bold; }
    input, select, button { margin-top: 7px; padding: 12px; width: 100%; font-size: 1rem; border: 1px solid #ccc; border-radius: 6px; box-sizing: border-box; }
    .tool button { background: var(--primary); color: var(--light); font-weight: bold; cursor: pointer; margin-top: 15px; }
  
    .result { margin-top: 15px; font-weight: bold; font-size: 1.1rem; text-align: center; color: #222; white-space: pre-line; }
    .sub-tabs { display: flex; justify-content: center; gap: 10px; margin-bottom: 20px; }
    .sub-tabs button { flex:1; background:#eee; color:#333; border:none; padding:10px; font-weight:bold; cursor:pointer; border-radius:5px; }
    .sub-tabs button.active { background: var(--primary); color: var(--light); }
    canvas { margin-top: 20px; }
  </style>
</head>
<body>

<header>
  <button onclick="showTool('compoundTool')">Compound Interest</button>
  <button onclick="showTool('dayTool')">30-Day Diff</button>
  <button onclick="showTool('emiTool')">EMI</button>
  <button onclick="showTool('mutualTool')">Mutual Fund</button>
</header>

<!-- Compound Interest Calculator -->
<div id="compoundTool" class="tool">
  <h2>Compound Interest Calculator</h2>
  <label>Principal (‚Çπ):</label><input type="number" id="principal">
  <label>Annual Interest Rate (%):</label><input type="number" id="rate">
  <label>Time (years):</label><input type="number" id="time">
  <label>Compounding Frequency:</label>
  <select id="compoundOption">
    <option value="1">Yearly</option><option value="2">Half-Yearly</option>
    <option value="4">Quarterly</option><option value="12">Monthly</option>
    <option value="365">Daily</option>
  </select>
  <button onclick="calculateCompound()">Calculate</button>
  <div class="result" id="compoundResult"></div>
</div>

<!-- 30-Day Month Date Difference -->
<div id="dayTool" class="tool">
  <h2>30-Day Month Date Difference</h2>
  <label>Start Date (DD/MM/YYYY):</label>
  <div style="display:flex; gap:5px;">
    <input type="number" id="startDay" placeholder="DD"><input type="number" id="startMonth" placeholder="MM"><input type="number" id="startYear" placeholder="YYYY">
  </div>
  <label>End Date (DD/MM/YYYY):</label>
  <div style="display:flex; gap:5px;">
    <input type="number" id="endDay" placeholder="DD"><input type="number" id="endMonth" placeholder="MM"><input type="number" id="endYear" placeholder="YYYY">
  </div>
  <button onclick="calculate30DayDiff()">Calculate Days</button>
  <div class="result" id="dayResult"></div>
</div>

<!-- EMI Calculator -->
<div id="emiTool" class="tool">
  <h2>EMI Calculator</h2>
  <label>Loan Amount (‚Çπ):</label><input type="number" id="loanAmount">
  <label>Annual Interest Rate (%):</label><input type="number" id="loanRate">
  <label>Tenure (months):</label><input type="number" id="loanTenure">
  <button onclick="calculateEMI()">Calculate EMI</button>
  <div class="result" id="emiResult"></div>
</div>

<!-- Mutual Fund Calculator (SIP + Lumpsum) -->
<div id="mutualTool" class="tool">
  <h2>Mutual Fund Calculator</h2>
  <div class="sub-tabs">
    <button id="sipTab" class="active" onclick="showSubTool('sipCalc')">SIP</button>
    <button id="lumpTab" onclick="showSubTool('lumpCalc')">Lumpsum</button>
  </div>

  <!-- SIP Section -->
  <div id="sipCalc" class="sub-tool">
    <label>Monthly Investment (‚Çπ):</label><input type="number" id="sipAmount">
    <label>Expected Annual Return (%):</label><input type="number" id="sipRate">
    <label>Time Period (years):</label><input type="number" id="sipYears">
    <button onclick="calculateSIP()">Calculate SIP</button>
    <div class="result" id="sipResult"></div>
    <canvas id="sipChart"></canvas>
  </div>

  <!-- Lumpsum Section -->
  <div id="lumpCalc" class="sub-tool" style="display:none;">
    <label>Investment Amount (‚Çπ):</label><input type="number" id="lumpAmount">
    <label>Expected Annual Return (%):</label><input type="number" id="lumpRate">
    <label>Time Period (years):</label><input type="number" id="lumpYears">
    <button onclick="calculateLumpsum()">Calculate Lumpsum</button>
    <div class="result" id="lumpsumResult"></div>
    <canvas id="lumpChart"></canvas>
  </div>
</div>

<script>
let sipChartInstance=null, lumpChartInstance=null;

function showTool(toolId) {
  document.querySelectorAll('.tool').forEach(t => t.style.display="none");
  document.getElementById(toolId).style.display="block";
  window.scrollTo({ top: 0, behavior: "smooth" });
}

function showSubTool(id) {
  document.querySelectorAll('.sub-tool').forEach(t=>t.style.display="none");
  document.getElementById(id).style.display="block";
  document.getElementById("sipTab").classList.remove("active");
  document.getElementById("lumpTab").classList.remove("active");
  if(id==="sipCalc") document.getElementById("sipTab").classList.add("active");
  else document.getElementById("lumpTab").classList.add("active");
}

function calculateCompound() {
  let P=+document.getElementById("principal").value,r=+document.getElementById("rate").value/100,t=+document.getElementById("time").value,n=+document.getElementById("compoundOption").value;
  if (!P||!r||!t) return document.getElementById("compoundResult").innerText="‚ö†Ô∏è Fill all fields!";
  let A=P*Math.pow((1+r/n),n*t), interest=A-P;
  document.getElementById("compoundResult").innerText=`Future Value: ‚Çπ${A.toFixed(2)}\nInterest Earned: ‚Çπ${interest.toFixed(2)}`;
}

function calculate30DayDiff() {
  let d1=+document.getElementById("startDay").value,m1=+document.getElementById("startMonth").value,y1=+document.getElementById("startYear").value;
  let d2=+document.getElementById("endDay").value,m2=+document.getElementById("endMonth").value,y2=+document.getElementById("endYear").value;
  if ([d1,m1,y1,d2,m2,y2].some(isNaN)) return document.getElementById("dayResult").innerText="‚ö†Ô∏è Enter valid dates!";
  if (d1===31) d1=30; if (d2===31 && d1===30) d2=30;
  let totalDays=(y2-y1)*360+(m2-m1)*30+(d2-d1)-1;
  if (totalDays<0) return document.getElementById("dayResult").innerText="‚ö†Ô∏è End date must be after start date.";
  document.getElementById("dayResult").innerText=`üìÖ Total Days (30-day months, excl. end): ${totalDays}`;
}

function calculateEMI() {
  let P=+document.getElementById("loanAmount").value,r=(+document.getElementById("loanRate").value/100)/12,n=+document.getElementById("loanTenure").value;
  if (!P||!r||!n) return document.getElementById("emiResult").innerText="‚ö†Ô∏è Fill all fields!";
  let emi=(P*r*Math.pow(1+r,n))/(Math.pow(1+r,n)-1);
  document.getElementById("emiResult").innerText=`Monthly EMI: ‚Çπ${emi.toFixed(2)} for ${n} months`;
}

function calculateSIP() {
  let sip=+document.getElementById("sipAmount").value, rate=+document.getElementById("sipRate").value/100/12, years=+document.getElementById("sipYears").value;
  let months=years*12;
  if (!sip||!rate||!years) return document.getElementById("sipResult").innerText="‚ö†Ô∏è Fill all fields!";
  let futureValue=sip*((Math.pow(1+rate,months)-1)/rate)*(1+rate);
  let invested=sip*months, gain=futureValue-invested;
  document.getElementById("sipResult").innerText=`Invested: ‚Çπ${invested.toFixed(2)}\nFuture Value: ‚Çπ${futureValue.toFixed(2)}\nWealth Gain: ‚Çπ${gain.toFixed(2)}`;

  let labels=[], investedData=[], valueData=[];
  for(let y=1;y<=years;y++){
    let monthsSoFar=y*12;
    let fv=sip*((Math.pow(1+rate,monthsSoFar)-1)/rate)*(1+rate);
    labels.push("Year "+y);
    investedData.push(sip*monthsSoFar);
    valueData.push(fv);
  }
  if(sipChartInstance) sipChartInstance.destroy();
  sipChartInstance=new Chart(document.getElementById("sipChart"),{
    type:'line',
    data:{ labels, datasets:[
      {label:"Invested", data:investedData, borderColor:"#0077cc", backgroundColor:"rgba(0,119,204,0.2)", fill:true},
      {label:"Value", data:valueData, borderColor:"#28a745", backgroundColor:"rgba(40,167,69,0.2)", fill:true}
    ]},
    options:{ responsive:true, plugins:{legend:{position:'top'}} }
  });
}

function calculateLumpsum() {
  let P=+document.getElementById("lumpAmount").value, rate=+document.getElementById("lumpRate").value/100, t=+document.getElementById("lumpYears").value;
  if (!P||!rate||!t) return document.getElementById("lumpsumResult").innerText="‚ö†Ô∏è Fill all fields!";
  let futureValue=P*Math.pow(1+rate,t), gain=futureValue-P;
  document.getElementById("lumpsumResult").innerText=`Invested: ‚Çπ${P.toFixed(2)}\nFuture Value: ‚Çπ${futureValue.toFixed(2)}\nWealth Gain: ‚Çπ${gain.toFixed(2)}`;

  let labels=[], investedData=[], valueData=[];
  for(let y=1;y<=t;y++){
    let fv=P*Math.pow(1+rate,y);
    labels.push("Year "+y);
    investedData.push(P);
    valueData.push(fv);
  }
  if(lumpChartInstance) lumpChartInstance.destroy();
  lumpChartInstance=new Chart(document.getElementById("lumpChart"),{
    type:'line',
    data:{ labels, datasets:[
      {label:"Invested", data:investedData, borderColor:"#0077cc", backgroundColor:"rgba(0,119,204,0.2)", fill:true},
      {label:"Value", data:valueData, borderColor:"#28a745", backgroundColor:"rgba(40,167,69,0.2)", fill:true}
    ]},
    options:{ responsive:true, plugins:{legend:{position:'top'}} }
  });
}

showTool('compoundTool');
</script>
</body>
</html>
